<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Pale purple dot</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Lobster|Montserrat:300,400|Open+Sans" rel="stylesheet">
        <style>

            #slider-container {
                overflow: hidden;
            }
            #slider {
                position: relative;
                left: 0;
                height: 100px;
                width: 100px;
                background-color: #613d7c;
                border-radius: 50px;
                cursor: pointer;
            }

            html {
                position: relative;
                min-height: 100%;
            }

            body {
                font-family: Montserrat, sans-serif;
                font-weight: 300;
                margin-bottom: 60px;
            }

            h1, h2, h3 {
                font-family: Lobster, sans-serif;
            }

            pre {
                font-family: 'Open Sans', monospace;
                font-size: small;
            }

            pre .function {
                color: #96da00;
            }

            .curve-carousel {
                overflow-x: auto;
                white-space: nowrap;
            }

            .footer {
                position: absolute;
                bottom: 0;
                width: 100%;
                height: 60px;
                line-height: 60px;
                background-color: #f5f5f5;
            }

            svg {
                cursor: pointer;
            }

            svg text {
                font-family: monospace;
                font-size: 10px;
                fill: #5bc0de;
            }

            svg line {
                stroke-width: 1;
                stroke: #636c72;
                stroke-linecap: square;
            }

            svg path {
                stroke: #f0ad4e;
                stroke-width: 2;
                fill: transparent;
            }
        </style>
    </head>
<body class="bg-inverse">

    <div class="container">
        <div class="row mt-3">
            <div class="col-md-12 text-center">
                <img class="img-fluid" src="../../../images/728x90-1.png" />
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-md-12 text-white text-center">
                <h1>Easing functions</h1>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-12">
                <div class="curve-carousel">
                    <svg id="svg-template" width="200px" viewBox="0 0 150 150">
                        <text x="0" y="23">1.0</text>
                        <text x="0" y="73">0.5</text>
                        <text x="0" y="123">0.0</text>

                        <line x1="25" y1="20" x2="125" y2="20"/>

                        <line x1="25" y1="45" x2="30" y2="45"/>
                        <line x1="25" y1="70" x2="30" y2="70"/>
                        <line x1="25" y1="95" x2="30" y2="95"/>

                        <line x1="120" y1="45" x2="125" y2="45"/>
                        <line x1="120" y1="70" x2="125" y2="70"/>
                        <line x1="120" y1="95" x2="125" y2="95"/>

                        <line x1="25" y1="120" x2="125" y2="120"/>

                        <text x="25" y="135" id="curve-name">&infin;</text>
                        <!--<text x="67" y="135"></text>
                        <text x="116.5" y="135"></text>-->
            
                        <line x1="25" y1="20" x2="25" y2="120"/>

                        <line x1="50" y1="20" x2="50" y2="25"/>
                        <line x1="75" y1="20" x2="75" y2="25"/>
                        <line x1="100" y1="20" x2="100" y2="25"/>

                        <line x1="50" y1="115" x2="50" y2="120"/>
                        <line x1="75" y1="115" x2="75" y2="120"/>
                        <line x1="100" y1="115" x2="100" y2="120"/>

                        <line x1="125" y1="20" x2="125" y2="120"/>

                        <path id="curve" d="M 0 0"/>
                    </svg>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-12 text-white">
                <div id="slider-container">
                    <div id="slider" onclick="window.run();">
                        <span id="pixels">&infin;</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5 text-white">
            <div class="col-md-4 mb-3">
                <h3>One</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div class="col-md-4 mb-3">
                <h3>Two</h3>
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="col-md-4">
                <h3>Three</h3>
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>     
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-12 text-white">
                <h3>Example code</h3>
<pre class="text-white">
<span class="text-info font-italic">const</span> <span class="function">easeIn</span> = (<span class="text-warning">t, p</span>) =&gt; <span class="text-info">Math</span>.pow(t, p);
<span class="text-info font-italic">const</span> <span class="function">easeOut</span> = (<span class="text-warning">t, p</span>) =&gt; 1 - <span class="function">easeIn</span>(1 - t, p);
<span class="text-info font-italic">const</span> <span class="function">easeInOut</span> = (<span class="text-warning">t, p</span>) =&gt; t &lt; <span class="text-danger">0.5</span> ? <span class="function">easeIn</span>(t * 2, p) / 2 : <span class="function">easeOut</span>(t * 2 - 1, p) / 2 + <span class="text-danger">0.5</span>;

<span class="text-info font-italic">const</span> <span class="function">easeInSine</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="text-info">Math</span>.cos(t * <span class="text-info">Math</span>.PI / 2);
<span class="text-info font-italic">const</span> <span class="function">easeOutSine</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="function">easeInSine</span>(1 - t);
<span class="text-info font-italic">const</span> <span class="function">easeInOutSine</span> = (<span class="text-warning">t</span>) =&gt; t &lt; <span class="text-danger">0.5</span> ? <span class="function">easeInSine</span>(t * 2) / 2 : <span class="function">easeOutSine</span>(t * 2 - 1) / 2 + <span class="text-danger">0.5</span>;

<span class="text-info font-italic">const</span> <span class="function">easeInCircular</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="text-info">Math</span>.sqrt(1 - <span class="text-info">Math</span>.pow(t, 3));
<span class="text-info font-italic">const</span> <span class="function">easeOutCircular</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="function">easeInCircular</span>(1 - t);
<span class="text-info font-italic">const</span> <span class="function">easeInOutCircular</span> = (<span class="text-warning">t</span>) =&gt; t &lt; <span class="text-danger">0.5</span> ? <span class="function">easeInCircular</span>(t * 2) / 2 : <span class="function">easeOutCircular</span>(t * 2 - 1) / 2 + <span class="text-danger">0.5</span>;

<span class="text-info font-italic">const</span> <span class="function">easeInElastic</span> = (<span class="text-warning">t</span>) =&gt; - <span class="text-info">Math</span>.pow(2, 10 * (t -= 1)) * <span class="text-info">Math</span>.sin((t - <span class="text-danger">0.4</span> / 4) * (2 * <span class="text-info">Math</span>.PI) / <span class="text-danger">0.4</span>);
<span class="text-info font-italic">const</span> <span class="function">easeOutElastic</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="function">easeInElastic</span>(1 - t);
<span class="text-info font-italic">const</span> <span class="function">easeInOutElastic</span> = (<span class="text-warning">t</span>) =&gt; t &lt; <span class="text-danger">0.5</span> ? <span class="function">easeInElastic</span>(t * 2) / 2 : <span class="function">easeOutElastic</span>(t * 2 - 1) / 2 + <span class="text-danger">0.5</span>;

<span class="text-info font-italic">const</span> <span class="function">easeInBack</span> = (<span class="text-warning">t</span>) =&gt; t * t * (2.7 * t - 1.7);
<span class="text-info font-italic">const</span> <span class="function">easeOutBack</span> = (<span class="text-warning">t</span>) =&gt; 1 - <span class="function">easeInBack</span>(1 - t);
<span class="text-info font-italic">const</span> <span class="function">easeInOutBack</span> = (<span class="text-warning">t</span>) =&gt; t &lt; <span class="text-danger">0.5</span> ? <span class="function">easeInBack</span>(t * 2) / 2 : <span class="function">easeOutBack</span>(t * 2 - 1) / 2 + <span class="text-danger">0.5</span>;
</pre>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-md-4 mb-3 text-center">
                <img class="img-fluid" src="../../../images/300x250-1.png" />
            </div>
            <div class="col-md-4 mb-3 text-center">
                <img class="img-fluid" src="../../../images/300x250-2.png" />
            </div>
            <div class="col-md-4 mb-3 text-center">
                <img class="img-fluid" src="../../../images/300x250-1.png" />            
            </div>
        </div>
    </div>

    <footer class="footer bg-inverse">
        <div class="container text-muted text-center">
            &copy; 2017 Erik Barke
        </div>
    </footer>
</body>

<script>

    const easeIn = p => t => Math.pow(t, p);
    const easeOut = p => t => 1 - easeIn(p)(1 - t);
    const easeInOut = p => t => t < 0.5 ? easeIn(p)(t * 2) / 2 : easeOut(p)(t * 2 - 1) / 2 + 0.5;

    const easeInSine = (t) => 1 - Math.cos(t * Math.PI / 2);
    const easeOutSine = (t) => 1 - easeInSine(1 - t);
    const easeInOutSine = (t) => t < 0.5 ? easeInSine(t * 2) / 2 : easeOutSine(t * 2 - 1) / 2 + 0.5;

    const easeInCircular = (t) => 1 - Math.sqrt(1 - Math.pow(t, 3));
    const easeOutCircular = (t) => 1 - easeInCircular(1 - t);
    const easeInOutCircular = (t) => t < 0.5 ? easeInCircular(t * 2) / 2 : easeOutCircular(t * 2 - 1) / 2 + 0.5;

    const easeInElastic = (t) => - Math.pow(2, 10 * (t -= 1)) * Math.sin((t - 0.4 / 4) * (2 * Math.PI) / 0.4);
    const easeOutElastic = (t) => 1 - easeInElastic(1 - t);
    const easeInOutElastic = (t) => t < 0.5 ? easeInElastic(t * 2) / 2 : easeOutElastic(t * 2 - 1) / 2 + 0.5;

    const easeInBack = (t) => t * t * (2.7 * t - 1.7);
    const easeOutBack = (t) => 1 - easeInBack(1 - t);
    const easeInOutBack = (t) => t < 0.5 ? easeInBack(t * 2) / 2 : easeOutBack(t * 2 - 1) / 2 + 0.5;

    var easings = {
        easeInQuad: easeIn(2), easeOutQuad: easeOut(2), easeInOutQuad: easeInOut(2),
        easeInCubic: easeIn(3), easeOutCubic: easeOut(3), easeInOutCubic: easeInOut(3),
        easeInQuart: easeIn(4), easeOutQuart: easeOut(4), easeInOutQuart: easeInOut(4),
        easeInQuint: easeIn(5), easeOutQuint: easeOut(5), easeInOutQuint: easeInOut(5),
        easeInSine: easeInSine, easeOutSine: easeOutSine, easeInOutSine: easeInOutSine,
        easeInCircular: easeInCircular, easeOutCircular: easeOutCircular, easeInOutCircular: easeInOutCircular,
        easeInElastic: easeInElastic, easeOutElastic: easeOutElastic, easeInOutElastic: easeInOutElastic,
        easeInBack: easeInBack, easeOutBack: easeOutBack, easeInOutBack: easeInOutBack
    };

    function round(value, precision) {
        var multiplier = Math.pow(10, precision || 0);
        return Math.round(value * multiplier) / multiplier;
    }

    const container = document.querySelector("#slider-container");
    const slider = document.querySelector("#slider");
    const pixelElement = document.querySelector("#pixels");

    const fps = 60;
    const duration = 2;

    let selected = "easeInOutBack";
    let frames;
    let frame;

    let draw = () => {
        if(frame < frames) {
            let t = (frame / fps) / duration;
            let factor = easings[selected](t);
            let destination = container.offsetWidth - slider.offsetWidth;
            slider.style.left = Math.round(factor * destination)+ "px";
            pixelElement.innerHTML = slider.style.left;
            frame++;
            requestAnimationFrame(draw);
        }
    };

    let svg = document.querySelector("#svg-template");
    Object.keys(easings).forEach((e) => {

        let tweens = [];
        let path = "";
        let xframes = 100;

        for(let f = 0; f < xframes; f++) {
            let t = (f / 50) / 2;
            let factor = easings[e](t);
            tweens.push(factor);
        }
        tweens.reverse();

        path += "M 25 120";
        for(let i = 0; i < tweens.length; i++) {
            path += "L" + (i + 25) + " " + ((tweens[i] * xframes) + 20);
        }
        path += " L125 20";

        let clone = svg.cloneNode(true);
        clone.id = "";

        let svgPath = clone.querySelector("#curve");
        svgPath.setAttribute("d", path);
        svgPath.id = "";

        let curveName = clone.querySelector("#curve-name");
        curveName.innerHTML = e;
        curveName.id = "";

        clone.setAttribute("data-curve-name", e);

        svg.parentElement.appendChild(clone);
    });

    svg.style.display = "none";

    window.addEventListener("click", (e) => {
        if(e.target.hasAttribute("data-curve-name")) {
            selected = e.target.getAttribute("data-curve-name");
            window.run();
        }
    });

    window.run = () => {
        frame = 0;
        slider.style.left = "0px";
        frames = (1000 * duration) / (1000 / fps);
        draw();
    };

    window.run();

</script>

</html>